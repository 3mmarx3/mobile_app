<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>شوب أدمن - لوحة التحكم</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/style/style.css">
</head>
<body>
    <div class="sidebar" id="sidebar">
        <div class="logo"> القمه للتجاره والتوزيع</div>
        
        <a href="#" class="active" data-page="dashboard">
            <i class="fas fa-tachometer-alt"></i> لوحة التحكم
        </a>
        <a href="#" data-page="products">
            <i class="fas fa-box-open"></i> المنتجات
        </a>
        <a href="#" data-page="categories">
            <i class="fas fa-folder-open"></i> الفئات
        </a>
        <a href="#" data-page="orders">
            <i class="fas fa-shopping-cart"></i> الطلبات
        </a>
        <a href="#" data-page="users">
            <i class="fas fa-users"></i> المستخدمين
        </a>
        
        <hr style="margin: 2rem 1.5rem; border-color: #334155" />
        
        <a href="#" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
        </a>
    </div>

    <div class="main-content">
        <div class="header d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-3">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <h2 class="mb-0" id="page-title">نظرة عامة على لوحة التحكم</h2>
            </div>
            <div class="user-info">
                <span>مرحباً، <strong>المشرف العام</strong></span>
                <img src="https://ui-avatars.com/api/?name=المشرف+العام&background=6366f1&color=fff" alt="المشرف">
            </div>
        </div>

        <div id="page-container">
            <div id="dashboard" class="page active">
                <div class="row mb-4">
                    <div class="col-md-4 mb-3">
                        <div class="card-custom">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h3 style="color:#6b7280;margin-bottom:0.5rem">مبيعات اليوم</h3>
                                    <div class="stat-number">$12,458</div>
                                    <small style="color:#10b981">+18% من الأمس</small>
                                </div>
                                <i class="fas fa-dollar-sign fa-3x" style="color:#e0e7ff;opacity:0.7"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card-custom">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h3 style="color:#6b7280;margin-bottom:0.5rem">طلبات جديدة</h3>
                                    <div class="stat-number">142</div>
                                    <small style="color:#f59e0b">38 قيد الشحن</small>
                                </div>
                                <i class="fas fa-shopping-bag fa-3x" style="color:#fef3c7;opacity:0.7"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card-custom">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h3 style="color:#6b7280;margin-bottom:0.5rem">إجمالي العملاء</h3>
                                    <div class="stat-number">8,429</div>
                                    <small style="color:#10b981">+429 هذا الشهر</small>
                                </div>
                                <i class="fas fa-users fa-3x" style="color:#dbeafe;opacity:0.7"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-8 mb-3">
                        <div class="card-custom">
                            <h3>الطلبات الحديثة</h3>
                            <div class="table-responsive table-responsive-custom">
                                <table class="table table-custom">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" class="row-check"></th>

                                            <th>رقم الطلب</th>
                                            <th>العميل</th>
                                            <th>الحالة</th>
                                            <th>المبلغ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><input type="checkbox" class="row-check"></td>
                                            <td>#10248</td>
                                            <td>أحمد محمد</td>
                                            <td><span class="badge badge-custom pending">قيد الانتظار</span></td>
                                            <td>$320</td>
                                        </tr>
                                        <tr>
                                            <td><input type="checkbox" class="row-check"></td>
                                            <td>#10247</td>
                                            <td>فاطمة علي</td>
                                            <td><span class="badge badge-custom shipped">تم الشحن</span></td>
                                            <td>$89</td>
                                        </tr>
                                        <tr>
                                            <td><input type="checkbox" class="row-check"></td>
                                            <td>#10246</td>
                                            <td>محمود خالد</td>
                                            <td><span class="badge badge-custom delivered">تم التسليم</span></td>
                                            <td>$1,240</td>
                                        </tr>
                                        <tr>
                                            <td><input type="checkbox" class="row-check"></td>
                                            <td>#10245</td>
                                            <td>نورا حسن</td>
                                            <td><span class="badge badge-custom pending">قيد الانتظار</span></td>
                                            <td>$156</td>
                                        </tr>
                                        <tr>
                                            <td><input type="checkbox" class="row-check"></td>
                                            <td>#10244</td>
                                            <td>يوسف إبراهيم</td>
                                            <td><span class="badge badge-custom delivered">تم التسليم</span></td>
                                            <td>$450</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 mb-3">
                        <div class="card-custom">
                            <h3>المنتجات الأكثر مبيعاً</h3>
                            <div class="table-responsive table-responsive-custom">
                                <table class="table table-custom">
                                    <thead>
                                        <tr>
                                            <th>المنتج</th>
                                            <th>المبيعات</th>
                                            <th>الإيرادات</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>سماعات بلوتوث برو</td>
                                            <td>342</td>
                                            <td>$23,940</td>
                                        </tr>
                                        <tr>
                                            <td>لابتوب ألعاب X1</td>
                                            <td>189</td>
                                            <td>$188,211</td>
                                        </tr>
                                        <tr>
                                            <td>جلاكسي Z فولد</td>
                                            <td>156</td>
                                            <td>$148,980</td>
                                        </tr>
                                        <tr>
                                            <td>كاميرا DSLR 4K</td>
                                            <td>97</td>
                                            <td>$67,900</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        function saveToLocalStorage(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }

        function getFromLocalStorage(key) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : null;
        }
        
        const pages = {
            dashboard: document.getElementById('dashboard'),
            // الصفحات الأخرى غير موجودة في الـ HTML الحالي، ولكن روابطها باقية في الشريط الجانبي للتنقل
            products: document.getElementById('products'),
            categories: document.getElementById('categories'),
            orders: document.getElementById('orders'),
            users: document.getElementById('users')
        };

        document.querySelectorAll('.sidebar a[data-page]').forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const page = link.dataset.page;

                document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
                link.classList.add('active');

                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                if (pages[page]) {
                    pages[page].classList.add('active');
                }

                document.getElementById('page-title').textContent = {
                    dashboard: "نظرة عامة على لوحة التحكم",
                    products: "إدارة المنتجات",
                    categories: "إدارة الفئات",
                    orders: "إدارة الطلبات",
                    users: "إدارة المستخدمين"
                }[page];

                if (window.innerWidth < 992) {
                    document.getElementById('sidebar').classList.remove('active');
                }
            });
        });

        document.getElementById('mobileMenuBtn').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
            const sidebar = document.getElementById('sidebar');
            const mobileBtn = document.getElementById('mobileMenuBtn');

            if (window.innerWidth < 992 && 
                sidebar.classList.contains('active') && 
                !sidebar.contains(e.target) && 
                e.target !== mobileBtn && 
                !mobileBtn.contains(e.target)) {
                sidebar.classList.remove('active');
            }
        });

        function logout() {
            if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
                localStorage.removeItem('adminLoggedIn');
                window.location.href = './auth/login.html';
            }
            return false;
        }
        
        // ** تم حذف جميع دوال Product, Category, Order, User Functions **

        // لا يوجد حاجة لـ selectAllTop لأنها ليست جزءًا من لوحة التحكم
        
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 992) {
                document.getElementById('sidebar').classList.remove('active');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const isLoggedIn = getFromLocalStorage('adminLoggedIn');
            if (!isLoggedIn && window.location.pathname.includes('dashboard')) {
                window.location.href = './login.html';
            }
        });
    </script>
</body>
</html>